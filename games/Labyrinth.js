/*
@title: Labyrinth
@author: DorukSarpAlwaysStrikesBack!
*/

const player = "p";
const box = "b";
const goal = "g";
const labywall = "w";
const melody = tune`
147.05882352941177: a5^147.05882352941177,
441.1764705882353,
147.05882352941177: f5^147.05882352941177,
147.05882352941177,
147.05882352941177: f5^147.05882352941177,
147.05882352941177,
147.05882352941177: g5^147.05882352941177,
147.05882352941177,
147.05882352941177: d5^147.05882352941177,
147.05882352941177,
147.05882352941177: f5^147.05882352941177,
294.11764705882354,
147.05882352941177: f5-147.05882352941177,
294.11764705882354,
147.05882352941177: a4-147.05882352941177,
147.05882352941177: d5-147.05882352941177,
147.05882352941177,
147.05882352941177: a4-147.05882352941177,
147.05882352941177: e5-147.05882352941177,
147.05882352941177,
147.05882352941177: g4-147.05882352941177 + g5-147.05882352941177,
147.05882352941177: e5-147.05882352941177,
147.05882352941177,
147.05882352941177: a5-147.05882352941177,
147.05882352941177: b4-147.05882352941177,
147.05882352941177,
147.05882352941177: f4-147.05882352941177 + e5-147.05882352941177,
147.05882352941177: g5-147.05882352941177`
const playback = playTune(melody, Infinity)

setSolids([ player, labywall ])

setLegend(
  [ player, bitmap`
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333`],
  [ labywall, bitmap`
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000`]
);

let level = 0;
const levels = [
  map`
wwwwwwwwwwpwwwwwwwww
w....w.............w
w..w.w.............w
w..wwwwww....wwwww.w
w...w.w......w.w.w.w
w...w.w......w.w.w.w
www.w.w..wwwww.w.w.w
w...w.w..w...w.w.w.w
w...w.w..w...w...w.w
w.....w..w....w.ww.w
w.w...w..w.........w
w.w...w..w....www..w
w.w..ww..w.ww.w.w..w
w.w..w...w..w.w.ww.w
w.wwww..ww..w.w....w
w.......w...w.w..w.w
w.......w..wwww..w.w
w.......w..w.....w.w
w.......w..w.....w.w
wwwwwwwww..wwwwwwwww`,
  ]

  const cl = levels[level];
setMap(cl);

onInput("w", () => {
  getFirst(player).y -= 1;
});

onInput("s", () => {
  getFirst(player).y += 1;
});

onInput("a", () => {
  getFirst(player).x -= 1;
});

onInput("d", () => {
  getFirst(player).x += 1;
});
